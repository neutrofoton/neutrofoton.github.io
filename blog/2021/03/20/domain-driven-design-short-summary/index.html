
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Domain Driven Design Short Summary - neutrofoton</title>
  <meta name="author" content="neutro">

  
  <meta name="description" content="I believe there are tons of articles and books out there that discuss about Domain Driven Design (DDD for short). This post essentially is taken from &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://neutrofoton.github.io/blog/2021/03/20/domain-driven-design-short-summary/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="neutrofoton" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<style>
article img {
  border: 0;
}
aside.sidebar img {
  border-color: #e0e0e0;
}
article img, article video, article .flash-video{
  box-shadow: rgba(255,255,255,0.15) 0 1px 4px;
}
</style>

<!-- badge -->
<style type="text/css">
  .badge1 {
  position:relative;
  }
  .badge1[data-badge]:after {
  content: attr(data-badge);
  position: absolute;
  /*top: -10px;*/
  right: -30px;
  font-size: .7em;
  background: #c57373;
  color: white;
  /* width: 18px; */
  min-width: 18px;
  height: 18px;
  text-align: center;
  line-height: 18px;
  border-radius: 450%;
  box-shadow: 0 0 1px #333;

  padding: 2px;
  }
</style>

  


  <link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">neutrofoton</a></h1>
  
    <h2>Science, Technology and Life</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="neutrofoton.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <!--<li><a href="/about">About</a></li>-->
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Domain Driven Design Short Summary</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2021-03-20T15:49:56+07:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2021</span></span> <span class='time'>3:49 pm</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://neutrofoton.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I believe there are tons of articles and books out there that discuss about Domain Driven Design (DDD for short). This post essentially is taken from my note archieved when I explored about DDD from several resources. I rewrite it in here as a refresh for myself mainly.</p>

<p>Domain Driven Design (DDD) is the concept that the structure and language of software code (class names, class methods, class variables) should match the business domain[1].  We don&rsquo;t need to kill a mosquito with a cannon. We need to choose the fittest method in solving a problem. As well as DDD, it is not always be a fit method in solving application design. A software application has several attributes. Some of them deal with[3]:</p>

<ul>
<li>Amount of Data</li>
<li>Performance</li>
<li>Business Logic complexity</li>
<li>Tehnical Complexity.</li>
</ul>


<p>From the fourth software attributes, DDD is the most suitable with an application that has a <em>complex business logic</em>. DDD is designed to tackle the complexity of business rules. The main goals of DDD are[1]:</p>

<ul>
<li>Placing the project&rsquo;s primary focus on the core domain and domain logic;</li>
<li>Basing complex designs on a model of the domain;</li>
<li>Initiating a creative collaboration between technical and domain experts to iteratively refine a conceptual model that addresses particular domain problems.</li>
</ul>


<p>One of good resources about DDD is <a href="https://www.pluralsight.com/courses/domain-driven-design-in-practice">DDD course by Vladimir Khorikov</a>. I also cited a few/snippet code from his course to make my summary about DDD more clearer to understand.</p>

<h1>Terms in DDD</h1>

<h2>Ubiquitous Languange</h2>

<p><em>Ubiquitous Languanges</em> brides the gab between developer and business expert/ domain expert/ subject matter expert (SME). The <em>Ubiquitous Languange</em> notion come up to avoid misunderstanding between them. For example, the developer has a class <code>Product</code> that represent business term <em>Product</em> (both product and package). On the other hand the business expert treat <em>Product</em> and <em>Package</em> as different things. By the condition, it is needed the same languange to avoid misunderstanding.</p>

<h2>Bounded Context</h2>

<p>Bounded Context is a central pattern in DDD. It is the focus of DDD&rsquo;s strategic design section which is all about dealing with large models and teams. DDD deals with large models by dividing them into different <em>Bounded Contexts</em> and being explicit about their interrelationships [Martin Fowler][8].</p>

<p><em>Bounded Context</em> notion comes up to make clear boundries between different parts of the system. Let&rsquo;s say our system consist of <em>Sales</em> and <em>Support</em>, we can seperate Product into <em>Sales</em> and <em>Support</em> context to make clear boundries between the two.</p>

<p><img class="center" src="/images/post/2021-03-20-fig00.png"></p>

<center><small>Figure 1: Bounded Contexts <br/>
        Source: https://martinfowler.com/bliki/BoundedContext.html</small>
</center>




<p><p/></p>

<p>Figure 1 shows that <em>Bounded Context</em> aims for separating the model and explicitly drawn the boundaries between pieces. The reason for context separation is that as the application grows, it becomes harder to maintain a single unified model as it becomes larger and more people get involved in the development process.</p>

<h2>Sub Domain</h2>

<p>The difference between <em>Sub Domain</em> and <em>Bounded Context</em> is that the <em>Sub Domain</em> is a <em>Problem Space</em>. Meanwhile <em>Bounded Context</em> is a <em>Solution Space</em>. <em>Sub Domain</em> and <em>Bounded Context</em> have a <strong>1-to-1</strong> relation. It means that a <em>Sub Domain</em> should be covered with exactly a <em>Bounded Context</em>.</p>

<p><img class="center" src="/images/post/2021-03-20-fig03.png"></p>

<p><center><small>Figure 2: Sub Domain - Bounded Contexts</small>
</center></p>

<p>Since <em>Sub Domain</em> is a <em>Problem Space</em>, it should be defined by <em>Business Expert</em> or <em>Domain Experts</em>. The <em>Sub Domain</em> topic usually will come up when we have a talk with the <em>Domain Expert</em> while gathering requirement.</p>

<h2>Core Domain</h2>

<p>The notion that focuses on <em>Domain Model</em> which is the most important part of the system.</p>

<h1>Onion Architecture</h1>

<p>The implementation of DDD in onion architecture[3][5][6] showed in the Figure 3.</p>

<p><img class="center" src="/images/post/2021-03-20-fig01.png"></p>

<p><center>
    <small>Figure 3: DDD in onion architecture </small>
</center>
<br/></p>

<p>Figure 3 shows that the core of the architecture is the <em>Domain Model</em>. The <em>Domain Model</em> is isolated from others for seperation of consern purpose. It consists of <em>Entities, Value Objects, Domain Events,</em> and <em>Agregates</em>. They are most important part in DDD since they represent business logic implementation.</p>

<p>The outer layer in the onion architecture depends on the inner one. The inner layer is isolated from the outer layer that make the inner layer does not know the outer one. Figure 3 denotes that the <em>Domain Model</em> does not know how it is peristed to database. Since persisting model to database is handled by <em>Repository</em> on the outer layer.</p>

<h1>Testing in TDD</h1>

<p><em>Unit Test</em> is one of important part in software development. Test coverage that reaches 100% has high effort. In practice the most important that should cover most unit test is the code base <em>(Domain Model)</em> at the inner most layer in the onion architecture. The closer to 100%, the better the <em>Unit Test</em> coverage will be. Meanwhile for the outer layer, the test schenario could be coveraged by integration test.</p>

<h1>Entity vs Value Object</h1>

<p>The difference between Entity and Value Object can be identified from several ways:</p>

<ul>
<li>Type of Equality</li>
<li>Immutability</li>
<li>Lifespan</li>
</ul>


<h2>1. Type of equality</h2>

<p><em>Type Equality</em> is applied to the objects which have the same type. It is classified into 3 categories:</p>

<ul>
<li><p><em>Identifier Equality</em><br/>
Two objects A and B are identified have <em>Identifier Equality</em> if they have the same <em>Id</em>.</p></li>
<li><p><em>Reference Equality</em><br/>
Two objects A and B are identified have <em>Reference Equality</em> if they point to the same <em>memory address</em>.</p></li>
<li><p><em>Structural Equality</em><br/>
Two objects A and B are identified have <em>Structural Equality</em> if <em>all the member values are matched</em>.</p></li>
</ul>


<p>The 3 types of Type Equality is summarized in the following Figure.</p>

<p><img class="center" src="/images/post/2021-03-20-fig02.png"></p>

<p><center><small>Figure 4: Type Equality classification</small>
</center></p>

<p><em>Identifier Equality</em> usually referes to <em>Entity</em>. Meanwhile <em>Structural Equality</em> refers to <em>Value Object</em>. The <em>Reference Equality</em> can be applied to <em>Entity</em> or <em>Value Object</em>. In practice, <em>Value Object</em> does not has an Id.</p>

<h2>2. Immutability</h2>

<p>The characteristic of <em>Entity</em>:</p>

<ul>
<li>Having identity <em>Id</em></li>
<li>Mutable</li>
</ul>


<p>The characteristic of <em>Value Object</em>:</p>

<ul>
<li>Having no identity <em>Id</em></li>
<li>Immutable</li>
</ul>


<h2>3. Lifespan</h2>

<p>From the lifespan point of view, <em>Value Object</em> can not live by its own. It can be owned by one or several identities.
For example <code>Address</code> object can not stay by its own. It should be belonged to <code>Person</code> object. From persistance perspective, <em>Value Object</em> does not have its own table in database.</p>

<h1>How to Recognize Entity or Value Object</h1>

<p>It is not always clear having specific characteristic if a term or notion in a business process is an <em>Entity</em> or <em>Value Object</em>. It depends on the business process itself. A good approach to identify whether a notion of object is an <em>Entity</em> or <em>Value Object</em> is by comparing to <em>integer</em>[3].</p>

<p><figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="c1">//Integer</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">MethodA</span><span class="p">(){</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">value1</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">value2</span> <span class="p">=</span> <span class="m">5</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//Value Object</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">MethodB</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//money1 and money2 essentially the same. </span>
</span><span class='line'>    <span class="c1">//since they have the same nominal in business process context.</span>
</span><span class='line'>    <span class="c1">//programmatically they both have the same structure equality</span>
</span><span class='line'>    <span class="n">Money</span> <span class="n">money1</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Money</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Money</span> <span class="n">money2</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Money</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>Ideally most business logic elements are identified as <em>Value Objects</em>. The <em>Entity</em> act as a wrapper of <em>Value Object(s)</em>. However, don&rsquo;t hesitate to refactor <em>Value Object</em> to <em>Entity</em> or vise versa if we identify it should be.</p>

<p><figure class='code'><figcaption><span>Entity Base Class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">Entity</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">virtual</span> <span class="kt">long</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">protected</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="kt">object</span> <span class="n">obj</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">other</span> <span class="p">=</span> <span class="n">obj</span> <span class="k">as</span> <span class="n">Entity</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">GetRealType</span><span class="p">()</span> <span class="p">!=</span> <span class="n">other</span><span class="p">.</span><span class="n">GetRealType</span><span class="p">())</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">Id</span> <span class="p">==</span> <span class="m">0</span> <span class="p">||</span> <span class="n">other</span><span class="p">.</span><span class="n">Id</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">Id</span> <span class="p">==</span> <span class="n">other</span><span class="p">.</span><span class="n">Id</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="p">==(</span><span class="n">Entity</span> <span class="n">a</span><span class="p">,</span> <span class="n">Entity</span> <span class="n">b</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="k">null</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="k">null</span><span class="p">)</span> <span class="p">||</span> <span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="p">!=(</span><span class="n">Entity</span> <span class="n">a</span><span class="p">,</span> <span class="n">Entity</span> <span class="n">b</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">!(</span><span class="n">a</span> <span class="p">==</span> <span class="n">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">(</span><span class="n">GetRealType</span><span class="p">().</span><span class="n">ToString</span><span class="p">()</span> <span class="p">+</span> <span class="n">Id</span><span class="p">).</span><span class="n">GetHashCode</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">private</span> <span class="n">Type</span> <span class="nf">GetRealType</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">NHibernateProxyHelper</span><span class="p">.</span><span class="n">GetClassWithoutInitializingProxy</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>Value Object base class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'>    <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="kt">object</span> <span class="n">obj</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">valueObject</span> <span class="p">=</span> <span class="n">obj</span> <span class="k">as</span> <span class="n">T</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">valueObject</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nf">EqualsCore</span><span class="p">(</span><span class="n">valueObject</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">protected</span> <span class="k">abstract</span> <span class="kt">bool</span> <span class="nf">EqualsCore</span><span class="p">(</span><span class="n">T</span> <span class="n">other</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nf">GetHashCodeCore</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">protected</span> <span class="k">abstract</span> <span class="kt">int</span> <span class="nf">GetHashCodeCore</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="p">==(</span><span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">b</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="k">null</span><span class="p">)</span> <span class="p">&amp;&amp;</span> <span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="k">null</span><span class="p">)</span> <span class="p">||</span> <span class="n">ReferenceEquals</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="k">operator</span> <span class="p">!=(</span><span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">ValueObject</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">b</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">!(</span><span class="n">a</span> <span class="p">==</span> <span class="n">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h1>Agregate</h1>

<p><em>Aggregate</em> is a pattern in DDD. It is a cluster of domain objects that can be treated as a single unit[7]. <em>Aggregate</em> is an encapsulation of <em>Entities</em> and/or <em>Value Objects</em> (domain objects). An <em>Entity</em> can belong to a single <em>Agregate</em> only. Meanwhile a <em>Value Object</em> can belong to multiple <em>Agregates</em>.</p>

<p>An <em>Agregate</em> contains a set of operations which those domain objects can be operated on. An <em>Agregate</em> also act as a single operation unit. Application layer should reload it from database, then perform action and store it back as a single object. Hence, the <em>Agregate</em> should not be too large. Commonly it contains maximum 3 <em>Entities</em>. On the contrary to <em>Entity</em>, we can have as many <em>Value Objects</em> in an <em>Agregate</em> as we want.</p>

<p><figure class='code'><figcaption><span>Agregate Root</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">AggregateRoot</span> <span class="p">:</span> <span class="n">Entity</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>Repository for Database Operation</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">Repository</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="n">AggregateRoot</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">T</span> <span class="nf">GetById</span><span class="p">(</span><span class="kt">long</span> <span class="n">id</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">(</span><span class="s">&quot;load data from database&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="k">void</span> <span class="nf">Save</span><span class="p">(</span><span class="n">T</span> <span class="n">aggregateRoot</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">(</span><span class="s">&quot;operation insert to database&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2>Domain Event</h2>

<p><em>Domain Event</em> represents an event that&rsquo;s significant to the <em>Domain Model</em>. It&rsquo;s important to distinguish <em>Domain Event</em> to <em>System Event</em>. <em>System Event</em> deals with infrastructure event such as button click, timer tick, window close etc. On the other hand, <em>Domain Event</em> describe occasion which is important to the <em>Domain</em>. For example, when a button clicked <em>(System Event)</em>, it calls a domain operation. Domain operation trigger an event to change balance values in other <em>Bounded Context</em> for example head office.</p>

<p><em>Domain Event</em> is often used to[3]:</p>

<ul>
<li>Decouple <em>Bounded Context</em></li>
<li>Facilitate communication between <em>Bounded Context</em></li>
<li>Decouple <em>Entities</em> within a <em>Bounded Context</em></li>
</ul>


<p>The guidelines in implementing <em>Domain Event</em> are[3]:</p>

<ul>
<li>Naming should be in <em>Past Tense</em>. Example: <code>BalanceChangedEvent</code></li>
<li>Passing data as small/little as possible. Don&rsquo;t pass data/information more than needed.</li>
<li>We should not pass <em>Entity</em> to an <em>Event</em>. Since it will produce additonal point of coupling. We should use primitive data type instead.</li>
</ul>


<h1>References</h1>

<ol>
<li><a href="https://en.wikipedia.org/wiki/Domain-driven_design">https://en.wikipedia.org/wiki/Domain-driven_design</a></li>
<li><a href="https://www.amazon.com/gp/product/0321125215">Domain Driven Design: Tackling Complexity in the Heart of Software</a></li>
<li><a href="https://www.pluralsight.com/courses/domain-driven-design-in-practice">https://www.pluralsight.com/courses/domain-driven-design-in-practice</a></li>
<li><a href="https://www.baeldung.com/spring-data-ddd">https://www.baeldung.com/spring-data-ddd</a></li>
<li><a href="https://www.baeldung.com/spring-boot-clean-architecture">https://www.baeldung.com/spring-boot-clean-architecture</a></li>
<li><a href="https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/">https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/</a></li>
<li><a href="https://martinfowler.com/bliki/DDD_Aggregate.html">https://martinfowler.com/bliki/DDD_Aggregate.html</a></li>
<li><a href="https://martinfowler.com/bliki/BoundedContext.html">https://martinfowler.com/bliki/BoundedContext.html</a></li>
</ol>

</div>


  <footer>
    <p class="meta">
      <a href="javascript:window.print()" class="print-button">Print</a>


  

<span class="byline author vcard">Posted by <span class="fn">neutro</span></span>

      




<time class='entry-date' datetime='2021-03-20T15:49:56+07:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2021</span></span> <span class='time'>3:49 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/pattern/'>pattern</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://neutrofoton.github.io/blog/2021/03/20/domain-driven-design-short-summary/" data-via="" data-counturl="http://neutrofoton.github.io/blog/2021/03/20/domain-driven-design-short-summary/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2020/11/30/generate-pojo-and-hibernate-mapping-using-hibernate-tools/" title="Previous Post: Generate POJO and Hibernate Mapping Using Hibernate Tools">&laquo; Generate POJO and Hibernate Mapping Using Hibernate Tools</a>
      
      
    </p>
  </footer>
</article>

  <section id="comments">
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Me</h1>
  <img class="left" src="/images/me.png" alt="Drawing" style="width: 100px;height:100px"/>
  <p>
    No many things to write about me here, except the one who enjoy feeding koi fish and have interest in computer technology. Especially programming, control engineering, artificial intelligent and math. Please feel free to update me if I miss something in blog post. You can reach me at <i class="fa fa-envelope-o"></i>neutrofoton[at]gmail.com
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2021/03/20/domain-driven-design-short-summary/">Domain Driven Design Short Summary</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/30/generate-pojo-and-hibernate-mapping-using-hibernate-tools/">Generate POJO and Hibernate Mapping Using Hibernate Tools</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/10/23/pptp-on-ubuntu/">PPTP on Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/09/16/configure-php-and-virtual-host-macos-high-sierra/">Configure PHP and Virtual Host macOS High Sierra</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/11/22/pptp-on-macos/">PPTP on macOS</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/09/14/create-and-consume-c-plus-plus-class-dll-on-windows/">Create and Consume C++ Class DLL on Windows</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/05/10/winmerge-and-diffmerge-as-git-diff-merge-tool/">WinMerge and DiffMerge as Git Diff Merge Tool</a>
      </li>
    
  </ul>
</section>
<!--
<section>
  <h1>Categories</h1>
  <ul id="category-list">
    
    
    <li><a href="/blog/categories/csharp/index.html">csharp ( 10 )</a></li>
    
    
    <li><a href="/blog/categories/php/index.html">php ( 4 )</a></li>
    
    
    <li><a href="/blog/categories/macos/index.html">macos ( 14 )</a></li>
    
    
    <li><a href="/blog/categories/apache/index.html">apache ( 5 )</a></li>
    
    
    <li><a href="/blog/categories/mysql/index.html">mysql ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/java/index.html">java ( 5 )</a></li>
    
    
    <li><a href="/blog/categories/mono/index.html">mono ( 4 )</a></li>
    
    
    <li><a href="/blog/categories/aspnet/index.html">aspnet ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/pattern/index.html">pattern ( 3 )</a></li>
    
    
    <li><a href="/blog/categories/eclipse/index.html">eclipse ( 3 )</a></li>
    
    
    <li><a href="/blog/categories/xcode/index.html">xcode ( 4 )</a></li>
    
    
    <li><a href="/blog/categories/xamarin/index.html">xamarin ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/octopress/index.html">octopress ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/ios/index.html">ios ( 2 )</a></li>
    
    
    <li><a href="/blog/categories/mathematic/index.html">mathematic ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/javascript/index.html">javascript ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/spring/index.html">spring ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/code-block/index.html">code block ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/visual-studio/index.html">visual studio ( 2 )</a></li>
    
    
    <li><a href="/blog/categories/linux/index.html">linux ( 6 )</a></li>
    
    
    <li><a href="/blog/categories/windows/index.html">windows ( 3 )</a></li>
    
    
    <li><a href="/blog/categories/cpp/index.html">cpp ( 5 )</a></li>
    
    
    <li><a href="/blog/categories/virtualbox/index.html">virtualbox ( 2 )</a></li>
    
    
    <li><a href="/blog/categories/git/index.html">git ( 4 )</a></li>
    
    
    <li><a href="/blog/categories/arduino/index.html">arduino ( 1 )</a></li>
    
    
    <li><a href="/blog/categories/c/index.html">c ( 1 )</a></li>
    
  </ul>
</section>
-->
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/apache/' class='badge1' data-badge='5'>apache</a></li>
<li class='category'><a href='/blog/categories/arduino/' class='badge1' data-badge='1'>arduino</a></li>
<li class='category'><a href='/blog/categories/aspnet/' class='badge1' data-badge='1'>aspnet</a></li>
<li class='category'><a href='/blog/categories/c/' class='badge1' data-badge='1'>c</a></li>
<li class='category'><a href='/blog/categories/code-block/' class='badge1' data-badge='1'>code block</a></li>
<li class='category'><a href='/blog/categories/cpp/' class='badge1' data-badge='5'>cpp</a></li>
<li class='category'><a href='/blog/categories/csharp/' class='badge1' data-badge='10'>csharp</a></li>
<li class='category'><a href='/blog/categories/eclipse/' class='badge1' data-badge='3'>eclipse</a></li>
<li class='category'><a href='/blog/categories/git/' class='badge1' data-badge='4'>git</a></li>
<li class='category'><a href='/blog/categories/ios/' class='badge1' data-badge='2'>ios</a></li>
<li class='category'><a href='/blog/categories/java/' class='badge1' data-badge='5'>java</a></li>
<li class='category'><a href='/blog/categories/javascript/' class='badge1' data-badge='1'>javascript</a></li>
<li class='category'><a href='/blog/categories/linux/' class='badge1' data-badge='6'>linux</a></li>
<li class='category'><a href='/blog/categories/macos/' class='badge1' data-badge='14'>macos</a></li>
<li class='category'><a href='/blog/categories/mathematic/' class='badge1' data-badge='1'>mathematic</a></li>
<li class='category'><a href='/blog/categories/mono/' class='badge1' data-badge='4'>mono</a></li>
<li class='category'><a href='/blog/categories/mysql/' class='badge1' data-badge='1'>mysql</a></li>
<li class='category'><a href='/blog/categories/octopress/' class='badge1' data-badge='1'>octopress</a></li>
<li class='category'><a href='/blog/categories/pattern/' class='badge1' data-badge='3'>pattern</a></li>
<li class='category'><a href='/blog/categories/php/' class='badge1' data-badge='4'>php</a></li>
<li class='category'><a href='/blog/categories/spring/' class='badge1' data-badge='1'>spring</a></li>
<li class='category'><a href='/blog/categories/virtualbox/' class='badge1' data-badge='2'>virtualbox</a></li>
<li class='category'><a href='/blog/categories/visual-studio/' class='badge1' data-badge='2'>visual studio</a></li>
<li class='category'><a href='/blog/categories/windows/' class='badge1' data-badge='3'>windows</a></li>
<li class='category'><a href='/blog/categories/xamarin/' class='badge1' data-badge='1'>xamarin</a></li>
<li class='category'><a href='/blog/categories/xcode/' class='badge1' data-badge='4'>xcode</a></li>

  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'neutrofoton',
            count: 0,
            skip_forks: true,
            target: '#gh_repos',
            skip_repo: 'neutrofoton'+'.github.io'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
  <h1>Site I Visit</h1>
  <ul id="site_i_visit">

      <li class="post">
        <a href="http://www.cppreference.com">C++ Reference</a>
      </li>

  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2021 - neutro -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'neutrofoton';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://neutrofoton.github.io/blog/2021/03/20/domain-driven-design-short-summary/';
        var disqus_url = 'http://neutrofoton.github.io/blog/2021/03/20/domain-driven-design-short-summary/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
